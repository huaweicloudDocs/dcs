# 切换实例的主备节点<a name="ZH-CN_TOPIC_0107202758"></a>

切换Redis或Memcached主备类型缓存实例的主备节点。

## **URI**<a name="section666421314535"></a>

PUT /v1.0/\{project\_id\}/instances/\{instance\_id\}/swap

参数说明见[表1](#table366561355314)。

**表 1**  参数说明

<a name="table366561355314"></a>
<table><thead align="left"><tr id="row1379914136531"><th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.1"><p id="p1579915137537"><a name="p1579915137537"></a><a name="p1579915137537"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.2"><p id="p179961365313"><a name="p179961365313"></a><a name="p179961365313"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.3"><p id="p18799013165318"><a name="p18799013165318"></a><a name="p18799013165318"></a>必选</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.4"><p id="p17991613185314"><a name="p17991613185314"></a><a name="p17991613185314"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row207991313155315"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p88053714415"><a name="p88053714415"></a><a name="p88053714415"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p12805578413"><a name="p12805578413"></a><a name="p12805578413"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p680520794112"><a name="p680520794112"></a><a name="p680520794112"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p208051174414"><a name="p208051174414"></a><a name="p208051174414"></a>项目ID。</p>
</td>
</tr>
<tr id="row124172134116"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p1980516794120"><a name="p1980516794120"></a><a name="p1980516794120"></a>instance_id</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p18805177154116"><a name="p18805177154116"></a><a name="p18805177154116"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p1980520794110"><a name="p1980520794110"></a><a name="p1980520794110"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p108051473415"><a name="p108051473415"></a><a name="p108051473415"></a>实例ID。</p>
</td>
</tr>
</tbody>
</table>

## **请求消息**<a name="section10671191385310"></a>

**请求参数**

无

## **响应消息**<a name="section56801632184912"></a>

**响应参数**

参数说明见[表2](#table5929344419)。

**表 2**  参数说明

<a name="table5929344419"></a>
<table><thead align="left"><tr id="row1173730448"><th class="cellrowborder" valign="top" width="25%" id="mcps1.2.4.1.1"><p id="p16173193104416"><a name="p16173193104416"></a><a name="p16173193104416"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="12%" id="mcps1.2.4.1.2"><p id="p1317316354420"><a name="p1317316354420"></a><a name="p1317316354420"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="63%" id="mcps1.2.4.1.3"><p id="p111730318446"><a name="p111730318446"></a><a name="p111730318446"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row9173123114413"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.4.1.1 "><p id="p181731431445"><a name="p181731431445"></a><a name="p181731431445"></a>code</p>
</td>
<td class="cellrowborder" valign="top" width="12%" headers="mcps1.2.4.1.2 "><p id="p16173103104415"><a name="p16173103104415"></a><a name="p16173103104415"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="63%" headers="mcps1.2.4.1.3 "><p id="p117317314412"><a name="p117317314412"></a><a name="p117317314412"></a>主备切换结果：</p>
<a name="ul181731344415"></a><a name="ul181731344415"></a><ul id="ul181731344415"><li>成功：返回空值。</li><li>主备正执行数据初始同步：1。</li><li>主备状态异常：2。</li><li>服务内部异常：3。</li></ul>
</td>
</tr>
<tr id="row1317316317449"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.4.1.1 "><p id="p9174103184416"><a name="p9174103184416"></a><a name="p9174103184416"></a>message</p>
</td>
<td class="cellrowborder" valign="top" width="12%" headers="mcps1.2.4.1.2 "><p id="p14174113184416"><a name="p14174113184416"></a><a name="p14174113184416"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="63%" headers="mcps1.2.4.1.3 "><p id="p81742364412"><a name="p81742364412"></a><a name="p81742364412"></a>主备切换结果。</p>
</td>
</tr>
</tbody>
</table>

**响应样例**

```
//Master standby swap sucessful. 
{ 
    "code" : "", 
    "message" : "success"
} 
// Master standby swap failed. 
{ 
    "code" : "1", 
    "message" : "repliation abnormal, master connected_slaves:0\r"
}
```

## **状态码**<a name="section16714113165311"></a>

操作成功的状态码如[表3](#table8715161355312)所示，其他响应如[表1](状态码.md#table5210141351517)所示。

**表 3**  状态码

<a name="table8715161355312"></a>
<table><thead align="left"><tr id="row158075132530"><th class="cellrowborder" valign="top" width="15.15%" id="mcps1.2.3.1.1"><p id="p198071113185310"><a name="p198071113185310"></a><a name="p198071113185310"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="84.85000000000001%" id="mcps1.2.3.1.2"><p id="p3807713195310"><a name="p3807713195310"></a><a name="p3807713195310"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1180711138533"><td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.3.1.1 "><p id="p197671222144618"><a name="p197671222144618"></a><a name="p197671222144618"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="84.85000000000001%" headers="mcps1.2.3.1.2 "><p id="p127673220467"><a name="p127673220467"></a><a name="p127673220467"></a>主备切换成功。</p>
</td>
</tr>
</tbody>
</table>

